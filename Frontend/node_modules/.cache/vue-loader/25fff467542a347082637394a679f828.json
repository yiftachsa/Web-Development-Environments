{"remainingRequest":"C:\\scripts\\Courses_Scripts\\Internet_Programing_Environments\\Project\\assignment-3-2-v2-yiftach-merav\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\scripts\\Courses_Scripts\\Internet_Programing_Environments\\Project\\assignment-3-2-v2-yiftach-merav\\src\\components\\DetailsInstructions.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\scripts\\Courses_Scripts\\Internet_Programing_Environments\\Project\\assignment-3-2-v2-yiftach-merav\\src\\components\\DetailsInstructions.vue","mtime":1594911965648},{"path":"C:\\scripts\\Courses_Scripts\\Internet_Programing_Environments\\Project\\assignment-3-2-v2-yiftach-merav\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\scripts\\Courses_Scripts\\Internet_Programing_Environments\\Project\\assignment-3-2-v2-yiftach-merav\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\scripts\\Courses_Scripts\\Internet_Programing_Environments\\Project\\assignment-3-2-v2-yiftach-merav\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\scripts\\Courses_Scripts\\Internet_Programing_Environments\\Project\\assignment-3-2-v2-yiftach-merav\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsNCiAgfSwNCiAgcHJvcHM6IHsNCiAgICByZWNpcGVJZDogew0KICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgfSwNCiAgICByZWNpcGVUeXBlOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICB9LA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBkZXRhaWxlZEluc3RydWN0aW9uczogbnVsbCwNCiAgICAgIHJlY2lwZTogbnVsbCwNCiAgICB9Ow0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuZ2V0UmVjaXBlRGV0YWlscygpOw0KICB9LA0KICBjb21wdXRlZDogew0KICAgIG51bWJlck9mU3RlcHMoKSB7DQogICAgICBsZXQgY291bnQgPSAwOw0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmRldGFpbGVkSW5zdHJ1Y3Rpb25zLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5kZXRhaWxlZEluc3RydWN0aW9uc1tpXS5zdGVwcy5sZW5ndGg7IGorKykgew0KICAgICAgICAgIGNvdW50Kys7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGlmICgkY29va2llcy5nZXQoInNlc3Npb24iKSkgew0KICAgICAgICBjb25zb2xlLmxvZygiSGFwcHkiKQ0KICAgICAgICB0aGlzLiRyb290LnN0b3JlLnVwZGF0ZU51bWJlck9mSW5zdHJ1Y3Rpb25zKHRoaXMucmVjaXBlSWQsIGNvdW50KTsNCiAgICAgICAgaWYoIXRoaXMuJHJvb3Quc3RvcmUuaXNBbHJlYWR5UHJvZ3Jlc3ModGhpcy5yZWNpcGVJZCkpDQogICAgICAgIHsNCiAgICAgICAgICBjb25zb2xlLmxvZygic3VwZXIgSGFwcHkiKQ0KICAgICAgICAgIHRoaXMuJHJvb3Quc3RvcmUudXBkYXRlSW50ZWdlclByb2dyZXNzKHRoaXMucmVjaXBlSWQsIDApOw0KICAgICAgICB9DQogICAgICB9DQogICAgICByZXR1cm4gY291bnQ7DQoNCiAgICB9LA0KICB9LA0KICBtZXRob2RzOiB7DQogICAgcmVjaXBlUHJvcEZ1bmMoKSB7DQogICAgICAvL2NoZWNrIGluIHN0b3JlIGlmIHRoZSBwcmV2aWV3IGV4aXN0cw0KICAgICAgaWYgKHRoaXMuJHJvb3Quc3RvcmUuZ2V0UHJlTG9hZGVkUmVjaXBlKHRoaXMucmVjaXBlSWQpKSB7DQogICAgICAgIHRoaXMucmVjaXBlUHJvcD0gdGhpcy4kcm9vdC5zdG9yZS5nZXRQcmVMb2FkZWRSZWNpcGUodGhpcy5yZWNpcGVJZCk7DQogICAgICB9DQogICAgICB0aGlzLnJlY2lwZVByb3A9dW5kZWZpbmVkOw0KICAgIH0sDQogICAgYXN5bmMgZ2V0UmVjaXBlRGV0YWlscygpIHsNCiAgICAgIHRyeSB7DQogICAgICAgIHRoaXMucmVjaXBlUHJvcEZ1bmM7DQogICAgICAgIGxldCBwcm9taXNlcyA9IFtdOw0KICAgICAgICBpZiAoKHRoaXMucmVjaXBlVHlwZSA9PSAicGVyc29uYWwiKSB8ICh0aGlzLnJlY2lwZVR5cGUgPT0gImZhbWlseSIpKSB7DQogICAgICAgICAgaWYgKCEkY29va2llcy5nZXQoInNlc3Npb24iKSkgew0KICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi8iKS5jYXRjaCgoKSA9PiB7DQogICAgICAgICAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICB9DQogICAgICAgICAgLy9jaGVja2luZyB0aGUgdHlwZSBvZiByZWNpcGUNCiAgICAgICAgICBpZiAodGhpcy5yZWNpcGVUeXBlID09ICJwZXJzb25hbCIpIHsNCiAgICAgICAgICAgIHByb21pc2VzID0gdGhpcy5Vc2VyUmVjaXBlRGV0YWlscygpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBwcm9taXNlcyA9IHRoaXMuRmFtaWx5UmVjaXBlRGV0YWlscygpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBwcm9taXNlcyA9IHRoaXMuUmVjaXBlRGV0YWlscygpOw0KICAgICAgICB9DQogICAgICAgIGxldCByZXNwb25zZUNvbnRhaW5zUmVjaXBlID0gZmFsc2U7DQogICAgICAgIGlmIChwcm9taXNlcy5sZW5ndGggPT0gMikgew0KICAgICAgICAgIHJlc3BvbnNlQ29udGFpbnNSZWNpcGUgPSB0cnVlOw0KICAgICAgICB9DQogICAgICAgIGxldCByZXNwb25zZXMgPSBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcyk7DQogICAgICAgIHRoaXMuZGV0YWlsZWRJbnN0cnVjdGlvbnMgPSByZXNwb25zZXNbMF0uZGF0YTsNCiAgICAgICAgY29uc29sZS5sb2coInJlc3BvbnNlQ29udGFpbnNSZWNpcGU6ICIgKyByZXNwb25zZUNvbnRhaW5zUmVjaXBlKTsNCiAgICAgICAgaWYgKHJlc3BvbnNlQ29udGFpbnNSZWNpcGUpIHsNCiAgICAgICAgICB0aGlzLnJlY2lwZSA9IHRoaXMuJHJvb3Quc3RvcmUuZXh0cmFjdFJlY2lwZShyZXNwb25zZXNbMV0pOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMucmVjaXBlID0gdGhpcy5yZWNpcGVQcm9wOw0KICAgICAgICB9DQogICAgICAgIHRoaXMubnVtYmVyT2ZTdGVwczsNCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIGNvbnNvbGUubG9nKCJlcnJvciAiLCBlcnJvcik7DQogICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCIvTm90Rm91bmQiKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgIH0sDQogICAgUmVjaXBlRGV0YWlscygpIHsNCiAgICAgIGxldCBwcm9taXNlcyA9IFtdOw0KICAgICAgcHJvbWlzZXMucHVzaCgNCiAgICAgICAgdGhpcy5heGlvcy5nZXQoDQogICAgICAgICAgYCR7dGhpcy4kcm9vdC5zdG9yZS5iYXNlVXJsfS9yZWNpcGVzL2RldGFpbGVkSW5zdHJ1Y3Rpb25zL3JlY2lwZUlELyR7dGhpcy5yZWNpcGVJZH1gDQogICAgICAgICkNCiAgICAgICk7DQogICAgICBpZiAoIXRoaXMucmVjaXBlUHJvcCkgew0KICAgICAgICBwcm9taXNlcy5wdXNoKA0KICAgICAgICAgIHRoaXMuYXhpb3MuZ2V0KA0KICAgICAgICAgICAgYCR7dGhpcy4kcm9vdC5zdG9yZS5iYXNlVXJsfS9yZWNpcGVzL3JlY2lwZUlELyR7dGhpcy5yZWNpcGVJZH1gDQogICAgICAgICAgKQ0KICAgICAgICApOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIHByb21pc2VzOw0KICAgIH0sDQogICAgVXNlclJlY2lwZURldGFpbHMoKSB7DQogICAgICBsZXQgcHJvbWlzZXMgPSBbXTsNCiAgICAgIHByb21pc2VzLnB1c2goDQogICAgICAgIHRoaXMuYXhpb3MuZ2V0KA0KICAgICAgICAgIGAke3RoaXMuJHJvb3Quc3RvcmUuYmFzZVVybH0vdXNlci9teVJlY2lwZXMvZGV0YWlsZWRJbnN0cnVjdGlvbnMvcmVjaXBlSUQvJHt0aGlzLnJlY2lwZUlkfWANCiAgICAgICAgKQ0KICAgICAgKTsNCiAgICAgIGlmICghdGhpcy5yZWNpcGVQcm9wKSB7DQogICAgICAgIHByb21pc2VzLnB1c2goDQogICAgICAgICAgdGhpcy5heGlvcy5nZXQoDQogICAgICAgICAgICBgJHt0aGlzLiRyb290LnN0b3JlLmJhc2VVcmx9L3VzZXIvbXlSZWNpcGVzL3JlY2lwZUlELyR7dGhpcy5yZWNpcGVJZH1gDQogICAgICAgICAgKQ0KICAgICAgICApOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIHByb21pc2VzOw0KICAgIH0sDQogICAgRmFtaWx5UmVjaXBlRGV0YWlscygpIHsNCiAgICAgIGxldCBwcm9taXNlcyA9IFtdOw0KICAgICAgcHJvbWlzZXMucHVzaCgNCiAgICAgICAgdGhpcy5heGlvcy5nZXQoDQogICAgICAgICAgYCR7dGhpcy4kcm9vdC5zdG9yZS5iYXNlVXJsfS91c2VyL2ZhbWlseVJlY2lwZXMvZGV0YWlsZWRJbnN0cnVjdGlvbnMvcmVjaXBlSUQvJHt0aGlzLnJlY2lwZUlkfWANCiAgICAgICAgKQ0KICAgICAgKTsNCiAgICAgIGlmICghdGhpcy5yZWNpcGVQcm9wKSB7DQogICAgICAgIHByb21pc2VzLnB1c2goDQogICAgICAgICAgdGhpcy5heGlvcy5nZXQoDQogICAgICAgICAgICBgJHt0aGlzLiRyb290LnN0b3JlLmJhc2VVcmx9L3VzZXIvZmFtaWx5UmVjaXBlcy9yZWNpcGVJRC8ke3RoaXMucmVjaXBlSWR9YCANCiAgICAgICAgICApDQogICAgICAgICk7DQogICAgICB9DQogICAgICByZXR1cm4gcHJvbWlzZXM7DQogICAgfSwNCiAgfQ0KICAgIC8vIGdldFByb2dyZXNzKCkgew0KICAgIC8vICAgcmV0dXJuIHRoaXMuJHJvb3Quc3RvcmUuZ2V0UHJvZ3Jlc3ModGhpcy5yZWNpcGVJZCk7DQogICAgLy8gfSwNCn07DQo="},{"version":3,"sources":["DetailsInstructions.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DetailsInstructions.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n<div/>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  components: {\r\n  },\r\n  props: {\r\n    recipeId: {\r\n      required: true,\r\n    },\r\n    recipeType: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      detailedInstructions: null,\r\n      recipe: null,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getRecipeDetails();\r\n  },\r\n  computed: {\r\n    numberOfSteps() {\r\n      let count = 0;\r\n      for (let i = 0; i < this.detailedInstructions.length; i++) {\r\n        for (let j = 0; j < this.detailedInstructions[i].steps.length; j++) {\r\n          count++;\r\n        }\r\n      }\r\n      if ($cookies.get(\"session\")) {\r\n        console.log(\"Happy\")\r\n        this.$root.store.updateNumberOfInstructions(this.recipeId, count);\r\n        if(!this.$root.store.isAlreadyProgress(this.recipeId))\r\n        {\r\n          console.log(\"super Happy\")\r\n          this.$root.store.updateIntegerProgress(this.recipeId, 0);\r\n        }\r\n      }\r\n      return count;\r\n\r\n    },\r\n  },\r\n  methods: {\r\n    recipePropFunc() {\r\n      //check in store if the preview exists\r\n      if (this.$root.store.getPreLoadedRecipe(this.recipeId)) {\r\n        this.recipeProp= this.$root.store.getPreLoadedRecipe(this.recipeId);\r\n      }\r\n      this.recipeProp=undefined;\r\n    },\r\n    async getRecipeDetails() {\r\n      try {\r\n        this.recipePropFunc;\r\n        let promises = [];\r\n        if ((this.recipeType == \"personal\") | (this.recipeType == \"family\")) {\r\n          if (!$cookies.get(\"session\")) {\r\n            this.$router.push(\"/\").catch(() => {\r\n              this.$forceUpdate();\r\n            });\r\n            return;\r\n          }\r\n          //checking the type of recipe\r\n          if (this.recipeType == \"personal\") {\r\n            promises = this.UserRecipeDetails();\r\n          } else {\r\n            promises = this.FamilyRecipeDetails();\r\n          }\r\n        } else {\r\n          promises = this.RecipeDetails();\r\n        }\r\n        let responseContainsRecipe = false;\r\n        if (promises.length == 2) {\r\n          responseContainsRecipe = true;\r\n        }\r\n        let responses = await Promise.all(promises);\r\n        this.detailedInstructions = responses[0].data;\r\n        console.log(\"responseContainsRecipe: \" + responseContainsRecipe);\r\n        if (responseContainsRecipe) {\r\n          this.recipe = this.$root.store.extractRecipe(responses[1]);\r\n        } else {\r\n          this.recipe = this.recipeProp;\r\n        }\r\n        this.numberOfSteps;\r\n      } catch (error) {\r\n        console.log(\"error \", error);\r\n        this.$router.replace(\"/NotFound\");\r\n        return;\r\n      }\r\n    },\r\n    RecipeDetails() {\r\n      let promises = [];\r\n      promises.push(\r\n        this.axios.get(\r\n          `${this.$root.store.baseUrl}/recipes/detailedInstructions/recipeID/${this.recipeId}`\r\n        )\r\n      );\r\n      if (!this.recipeProp) {\r\n        promises.push(\r\n          this.axios.get(\r\n            `${this.$root.store.baseUrl}/recipes/recipeID/${this.recipeId}`\r\n          )\r\n        );\r\n      }\r\n      return promises;\r\n    },\r\n    UserRecipeDetails() {\r\n      let promises = [];\r\n      promises.push(\r\n        this.axios.get(\r\n          `${this.$root.store.baseUrl}/user/myRecipes/detailedInstructions/recipeID/${this.recipeId}`\r\n        )\r\n      );\r\n      if (!this.recipeProp) {\r\n        promises.push(\r\n          this.axios.get(\r\n            `${this.$root.store.baseUrl}/user/myRecipes/recipeID/${this.recipeId}`\r\n          )\r\n        );\r\n      }\r\n      return promises;\r\n    },\r\n    FamilyRecipeDetails() {\r\n      let promises = [];\r\n      promises.push(\r\n        this.axios.get(\r\n          `${this.$root.store.baseUrl}/user/familyRecipes/detailedInstructions/recipeID/${this.recipeId}`\r\n        )\r\n      );\r\n      if (!this.recipeProp) {\r\n        promises.push(\r\n          this.axios.get(\r\n            `${this.$root.store.baseUrl}/user/familyRecipes/recipeID/${this.recipeId}` \r\n          )\r\n        );\r\n      }\r\n      return promises;\r\n    },\r\n  }\r\n    // getProgress() {\r\n    //   return this.$root.store.getProgress(this.recipeId);\r\n    // },\r\n};\r\n</script>\r\n\r\n<style>\r\n\r\n .text{\r\n    font-family: Dosis, Helvetica, Arial, sans-serif;\r\n    font-size: 1.5rem;\r\n    font-weight: 300;\r\n  }\r\n\r\n  .textBold{\r\n    font-weight: 450;\r\n    font-size: 1.65rem;\r\n  }\r\n\r\n</style>\r\n"]}]}